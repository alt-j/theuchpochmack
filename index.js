"undefined"==typeof Promise&&function(){function a(b){function e(a,b){d.state="pending",d[a].length?setTimeout(function(){e(a,d.value=d[a].shift().call(c,b))},0):d.state=a}var c=this,d=c.then=function(){return a.prototype.then.apply(c,arguments)};return d.fulfilled=[],d.rejected=[],d.fulfill=function(a){e("fulfilled",a)},d.reject=function(a){e("rejected",a)},b.call(c,d.fulfill,d.reject),c}a.prototype={constructor:a,then:function(a,b){return a&&this.then.fulfilled.push(a),b&&this.then.rejected.push(b),"fulfilled"===this.then.state&&this.then.fulfill(this.then.value),this},"catch":function(a){return a&&this.then.rejected.push(a),this}},a.all=function(){function d(a,b,d){a.then(function e(d){return a.then.fulfilled.length>1?a.then(e):--c||b(d),d},function(a){d(a)})}var b=Array.prototype.slice.call(arguments),c=b.length;return new a(function(a,c){for(;b.length;)d(b.shift(),a,c)})},window.Promise=a}(),Function.prototype.bind||(Function.prototype.bind=function(a){var b=this,c=Array.prototype.slice.call(arguments,1),d=function(){},e=function(){return b.apply(this instanceof d&&a?this:a,c.concat(Array.prototype.slice.call(arguments,0)))};return d.prototype=e.prototype=b.prototype,e}),function(a){var b,c={NOT_RESOLVED:"NOT_RESOLVED",IN_RESOLVING:"IN_RESOLVING",RESOLVED:"RESOLVED"},d=function(){var l={trackCircularDependencies:!0,allowMultipleDeclarations:!0},m={},n=!1,o=[],p=function(a,d,e){e||(e=d,d=[]);var f=m[a];f||(f=m[a]={name:a,decl:b}),f.decl={name:a,prev:f.decl,fn:e,state:c.NOT_RESOLVED,deps:d,dependents:[],exports:b}},q=function(b,c,d){"string"==typeof b&&(b=[b]),n||(n=!0,k(u)),o.push({deps:b,cb:function(b,f){f?(d||e)(f):c.apply(a,b)}})},r=function(a){var b=m[a];return b?c[b.decl.state]:"NOT_DEFINED"},s=function(a){return!!m[a]},t=function(a){for(var b in a)a.hasOwnProperty(b)&&(l[b]=a[b])},u=function(){n=!1,v()},v=function(){var c,a=o,b=0;for(o=[];c=a[b++];)w(null,c.deps,[],c.cb)},w=function(a,b,d,e){var h=b.length;h||e([]);for(var o,p,i=[],k=0,n=h;n>k;){if(o=b[k++],"string"==typeof o){if(!m[o])return e(null,f(o,a)),void 0;p=m[o].decl}else p=o;if(p.state===c.IN_RESOLVING&&l.trackCircularDependencies&&j(p,d))return e(null,g(p,d)),void 0;i.push(p),x(p,d,function(a,b){if(b)return e(null,b),void 0;if(!--h){for(var f,c=[],d=0;f=i[d++];)c.push(f.exports);e(c)}})}},x=function(b,d,e){if(b.state===c.RESOLVED)return e(b.exports),void 0;if(b.dependents.push(e),b.state!==c.IN_RESOLVING){if(b.prev&&!l.allowMultipleDeclarations)return z(b,i(b)),void 0;l.trackCircularDependencies&&(d=d.slice()).push(b);var f=!1,g=b.prev?b.deps.concat([b.prev]):b.deps;b.state=c.IN_RESOLVING,w(b,g,d,function(c,d){return d?(z(b,d),void 0):(c.unshift(function(a,c){return f?(e(null,h(b)),void 0):(f=!0,c?z(b,c):y(b,a),void 0)}),b.fn.apply({name:b.name,deps:b.deps,global:a},c),void 0)})}},y=function(a,d){a.exports=d,a.state=c.RESOLVED;for(var f,e=0;f=a.dependents[e++];)f(d);a.dependents=b},z=function(a,b){a.state=c.NOT_RESOLVED;for(var e,d=0;e=a.dependents[d++];)e(null,b);a.dependents=[]};return{create:d,define:p,require:q,getState:r,isDefined:s,setOptions:t}},e=function(a){k(function(){throw a})},f=function(a,b){return Error(b?'Module "'+b.name+'": can\'t resolve dependence "'+a+'"':'Required module "'+a+"\" can't be resolved")},g=function(a,b){for(var e,c=[],d=0;e=b[d++];)c.push(e.name);return c.push(a.name),Error('Circular dependence has been detected: "'+c.join(" -> ")+'"')},h=function(a){return Error('Declaration of module "'+a.name+'" has already been provided')},i=function(a){return Error('Multiple declarations of module "'+a.name+'" have been detected')},j=function(a,b){for(var d,c=0;d=b[c++];)if(a===d)return!0;return!1},k=function(){var b=[],c=function(a){return 1===b.push(a)},d=function(){var a=b,c=0,d=b.length;for(b=[];d>c;)a[c++]()};if("object"==typeof process&&process.nextTick)return function(a){c(a)&&process.nextTick(d)};if(a.setImmediate)return function(b){c(b)&&a.setImmediate(d)};if(a.postMessage&&!a.opera){var e=!0;if(a.attachEvent){var f=function(){e=!1};a.attachEvent("onmessage",f),a.postMessage("__checkAsync","*"),a.detachEvent("onmessage",f)}if(e){var g="__modules"+ +new Date,h=function(a){a.data===g&&(a.stopPropagation&&a.stopPropagation(),d())};return a.addEventListener?a.addEventListener("message",h,!0):a.attachEvent("onmessage",h),function(b){c(b)&&a.postMessage(g,"*")}}}var i=a.document;if("onreadystatechange"in i.createElement("script")){var j=i.getElementsByTagName("head")[0],k=function(){var a=i.createElement("script");a.onreadystatechange=function(){a.parentNode.removeChild(a),a=a.onreadystatechange=null,d()},j.appendChild(a)};return function(a){c(a)&&k()}}return function(a){c(a)&&setTimeout(d,0)}}();"object"==typeof exports?module.exports=d():a.modules=d()}(this),modules.define("player",["jquery","block","inherit","track","turntable"],function(a,b,c,d,e,f){var g=d(c,{__constructor:function(){this.__base.apply(this,arguments),this._turntable=f.find(this.getDomNode()),this._control=this._findElement("play-button"),this._bindTo(this._control,"click",function(){this._getElementState(this._control,"reverted")?this.pause():this.play()});var c=window.AudioContext||window.webkitAudioContext;this._context=new c,this._tracks=e.findAll(this.getDomNode())},play:function(a){if(!this._source||this._source.mediaElement.ended){this.stop(),this._source=this._getSource(a||0);var b=this._context.createGain();this._source.connect(b),b.connect(this._context.destination)}return this._source.mediaElement.play(),this._turntable.start(.75),this._setElementState(this._control,"reverted"),this},_getSource:function(a){var b=this._tracks[a].getMediaElement(),c=this._context.createMediaElementSource(b),d=this;return b.addEventListener("ended",function(){d._tracks[a+1]?d.play(a+1):d.stop()},!0),b.addEventListener("error",function(){d.stop()},!0),c},pause:function(){return this._source&&(this._source.mediaElement.pause(),this._turntable.stop(),this._removeElementState(this._control,"reverted")),this},stop:function(){return this._source&&(this._source.disconnect(),this._source.mediaElement.currentTime=0,this._source=null,this._turntable.stop(),this._removeElementState(this._control,"reverted")),this}},{getBlockName:function(){return"player"}});a(g)}),modules.define("turntable",["jquery","block","inherit"],function(a,b,c,d){var e=d(c,{__constructor:function(a,b){this.__base.apply(this,arguments);var b=this._getOptions()||{};this._repaintTimeout=b.repaintTimeout||50,this._overclockingTime=b.overclockingTime||3e3},start:function(a){this._intervalStartingId&&clearInterval(this._intervalStartingId),this._frequency=a||0,this._delta=this._delta||0;var b=this;return this._turnAcceleration(function(){b._frequency||(clearInterval(b._intervalRotationId),b._intervalRotationId=0)}),this._frequency&&!this._intervalRotationId&&this._turnRotation(),this},stop:function(){return this.start(0)},_turnAcceleration:function(a){var b=360*this._repaintTimeout*this._frequency/1e3;this._acceleration=this._repaintTimeout*(b-this._delta)/this._overclockingTime;var c=this;this._intervalStartingId=setInterval(function(){c._delta+=c._acceleration,(c._acceleration>=0&&c._delta>=b||c._acceleration<0&&c._delta<=b)&&(clearInterval(c._intervalStartingId),c._intervalStartingId=0,"function"==typeof a&&a())},this._repaintTimeout)},_turnRotation:function(){var a=this,b=this.getDomNode();this.currentRotationAngle=this.currentRotationAngle||0,this._intervalRotationId=setInterval(function(){a.currentRotationAngle>=360?a.currentRotationAngle-=360-a._delta:a.currentRotationAngle+=a._delta,b.css("transform","rotate("+a.currentRotationAngle+"deg)")},this._repaintTimeout)}},{getBlockName:function(){return"turntable"}});a(e)}),modules.define("jquery",["load-script","jquery__config"],function(a,b,c){"undefined"!=typeof jQuery?a(jQuery):b(c.url,function(){a(jQuery)})}),modules.define("load-script",function(a){function e(a){c[a]=!0;var d=b[a];delete b[a],d.forEach(function(a){a()})}var b={},c={},d=document.getElementsByTagName("head")[0];a(function(a,f){if(c[a])return f(),void 0;if(b[a])return b[a].push(f),void 0;b[a]=[f];var g=document.createElement("script");g.type="text/javascript",g.charset="utf-8",g.src=("file:"===location.protocol&&0===a.indexOf("//")?"http:":"")+a,null===g.onreadystatechange?g.onreadystatechange=function(){var b=this.readyState;("loaded"===b||"complete"===b)&&(g.onreadystatechange=null,e(a))}:g.onload=g.onerror=function(){g.onload=g.onerror=null,e(a)},d.insertBefore(g,d.lastChild)})}),modules.define("jquery__config",function(a){a({url:"//yandex.st/jquery/1.11.1/jquery.min.js"})}),modules.define("block",["inherit","event-emitter","event-manager","block-event","jquery","vow","bt","extend"],function(a,b,c,d,e,f,g,h,i){function l(a){return"string"==typeof a?""===a&&(a=!1):a="number"==typeof a?String(a):Boolean(a),a}var j=b(c,{__constructor:function(a,b){a||(b=b||{},a=this._createDomElement(b)),b?b.__complete||(b=i(b,this.__self._getDomNodeOptions(a).options||{})):b=this.__self._getDomNodeOptions(a).options||{};var c=this.__self._getDomNodeDataStorage(a);c.blocks[this.__self.getBlockName()]=this,this._options=b,this._node=a,this._eventManager=new d(this),this._stateCache=null,this.__self._liveInitIfRequired(),this._cachedViewName=null},destruct:function(){this._destructed||(this.offAll(),this._eventManager.unbindAll(),this._eventManager=null,this._options=null,this._node=null,this._stateCache=null,this._destructed=!0)},getDomNode:function(){return this._node},_bindTo:function(a,b,c){return this._eventManager.bindTo(a,b,c),this},_unbindFrom:function(a,b,c){return this._eventManager.unbindFrom(a,b,c),this},emit:function(a,b){if("string"==typeof a&&(a=new e(a)),a.data=b,a.target=this,this.__base(a.type,a),!a.isPropagationStopped()){var c=f.Event(this.__self._getPropagationEventName(a.type));a._jqEvent=c;var d=this.getDomNode();d&&this.getDomNode().trigger(c,a)}return this},getView:function(){if(null===this._cachedViewName){var a=this.getDomNode().attr("class");this._cachedViewName=a?a.split(" ").shift().split("_")[1]:void 0}return this._cachedViewName},_setState:function(a,b){1===arguments.length&&(b=!0),b=l(b);var c=this.getDomNode();this._stateCache||(this._stateCache=this._parseStateCssClasses(c));var d=this._stateCache[a]||!1;return b!==d&&(this._stateCache[a]=b,d&&c.removeClass("_"+a+(d===!0?"":"_"+d)),b&&c.addClass("_"+a+(b===!0?"":"_"+b))),this},_removeState:function(a){return this._setState(a,!1)},_getState:function(a){return this._stateCache||(this._stateCache=this._parseStateCssClasses(this.getDomNode())),this._stateCache[a]||!1},_toggleState:function(a,b,c){b=l(b),c=l(c);var d=this._getState(a);return d===b?this._setState(a,c):d===c&&this._setState(a,b),this},_setElementState:function(a,b,c){if(!a)throw new Error("`domNode` should be specified for `_setElementState` method.");a=f(a),2===arguments.length&&(c=!0),c=l(c);var d=this._parseStateCssClasses(a),e=d[b];return e&&a.removeClass("_"+b+(e===!0?"":"_"+e)),c&&a.addClass("_"+b+(c===!0?"":"_"+c)),this},_removeElementState:function(a,b){return this._setElementState(a,b,!1)},_getElementState:function(a,b){if(a){a=f(a);var c=this._getElementName(a);if(c)return this._parseStateCssClasses(a)[b]||!1;throw new Error("Unable to get BEM Element name from DOM Node.")}throw new Error("`domNode` should be specified for `_getElementState` method.")},_toggleElementState:function(a,b,c,d){c=l(c),d=l(d);var e=this._getElementState(a,b);return e===c?this._setElementState(a,b,d):e===d&&this._setElementState(a,b,c),this},_findElement:function(a,b){return this._findAllElements(a,b)[0]},_findAllElements:function(a,b){b=b?f(b):this.getDomNode();for(var c=this.getView(),d=b.find("."+this.__self.getBlockName()+(c?"_"+c:"")+"__"+a),e=[],g=d.length,h=0;g>h;h++)e.push(f(d[h]));return e},_getOptions:function(){return this._options},_getElementOptions:function(a){if(a){a=f(a);var b=this._getElementName(a);if(b)return this.__self._getDomNodeOptions(a).options||{};throw new Error("Unable to get BEM Element name from DOM Node.")}throw new Error("`domNode` should be specified for `_getElementOptions` method.")},_createDomElement:function(a){return f(h.apply(i({},a,{block:this.__self.getBlockName()})))},_parseStateCssClasses:function(a){var b={},c=a.attr("class");if(c)for(var d=c.split(" "),e=d.length-1;e>=0;e--)if("_"===d[e].charAt(0)){var f=d[e].substr(1).split("_");b[f[0]]=2===f.length?f[1]:!0}return b},_getElementName:function(a){var b=this.getView(),c=(a[0].className||"").match(new RegExp(this.__self.getBlockName()+(b?"_"+b:"")+"__([a-zA-Z0-9-]+)(?:\\s|$)"));return c?c[1]:null}},{getBlockName:function(){return"block"},fromDomNode:function(a,b){if(!a)throw new Error("`domNode` should be specified for `findDomNode` method");var c=this.getBlockName();if(a=f(a),!a.length)throw new Error('Cannot initialize "'+c+'" from empty jQuery object');var d=this._getDomNodeDataStorage(a),e=d.blocks[c];if(!e){a.addClass(this._autoInitCssClass),void 0===b&&(b=this._getDomNodeOptions(a).options||{}),b.__complete=!0;var g=this;e=new g(a,b)}return e},initOnDomNode:function(a,b){var c;if(this._liveInit){if(this._liveInitIfRequired(),c=!1,this._instantInitHandlers)for(var d=0,e=this._instantInitHandlers.length;e>d;d++)if(this._instantInitHandlers[d](b,a)){c=!0;break}}else c=!0;return c?(a=f(a),this.fromDomNode(a,b)):null},_liveInitIfRequired:function(){var a=this.getBlockName();!this._liveInit||this._liveInitialized&&this._liveInitialized[a]||(this._liveInit(),(this._liveInitialized=this._liveInitialized||{})[a]=!0)},_liveInit:null,_instantInitIf:function(a){this._instantInitHandlers||(this._instantInitHandlers=[]),this._instantInitHandlers.push(a)},_liveBind:function(a,b){var c=this;this._getLiveEventsScopeElement().on(a,'[data-block="'+this.getBlockName()+'"]',function(a){b.call(c.fromDomNode(a.currentTarget),a)})},_liveBindToElement:function(a,b,c){var d=this,e=this.getBlockName(),g=['[class^="'+e+'_"][class$="__'+a+'"]','[class^="'+e+'_"][class*="__'+a+' "]'];this._getLiveEventsScopeElement().on(b,g.join(", "),function(a){c.call(d.fromDomNode(f(a.currentTarget).closest('[data-block="'+e+'"]')),a)})},_getLiveEventsScopeElement:function(){return f(document.body)},destructOnDomNode:function(a){a=f(a);var b=this.getBlockName(),c=this._getDomNodeDataStorage(a,!0);if(c&&c.blocks[b]){var d=c.blocks[b];d._destructed||d.destruct(),delete c.blocks[b]}},find:function(a){return this.findAll(a)[0]},findAll:function(a){if(!a)throw new Error("`parentElement` should be specified for `findAll` method");a=this._getDomNodeFrom(a);var b=a.find("[data-block="+this.getBlockName()+"]");if(b.length){for(var c=[],d=b.length,e=0;d>e;e++){var g=f(b[e]);c.push(this.fromDomNode(g))}return c}return[]},initDomTree:function(a){function q(a){var b=g.promise();return modules.isDefined(a)?(modules.require([a],function(d){c[a]=d,b.fulfill()}),b):null}if(!a)throw new Error("`domNode` should be specified for `initDomTree` method");a=this._getDomNodeFrom(a);var b="."+this._autoInitCssClass,c={},d=a.find(b);a.is(b)&&Array.prototype.unshift.call(d,a);for(var e=[],h=d.length,i=0;h>i;i++){var j=f(d[i]),k=this._getDomNodeOptions(j)||{},l=j.attr("data-block");if(l){e.push({node:j,className:l,options:k.options||{},isMixin:!1}),c[l]=null;var m=k.mixins;if(m)for(var n=0,o=m.length;o>n;n++){var p=m[n];p&&p.name&&(e.push({node:j,className:p.name,blockName:l,options:p,isMixin:!0}),c[p.name]=null)}}}return g.fulfill().then(function(){return g.all(Object.keys(c).map(function(a){return q(a)})).then(function(){for(var a=e.length,b=0;a>b;b++){var d=e[b],f=d.node,g=d.className,h=d.options,i=c[g];if(i)try{if(d.isMixin){var j=c[d.blockName];j&&i.fromBlock(j.fromDomNode(f),h)}else i.initOnDomNode(f,h)}catch(k){throw k.message=g+" init error: "+k.message,k}}})})},destructDomTree:function(a){if(!a)throw new Error("`domNode` should be specified for `destructDomTree` method");a=this._getDomNodeFrom(a);var b="."+this._autoInitCssClass+",."+this._delegateEventsCssClass,c=a.find(b);a.is(b)&&Array.prototype.unshift.call(c,a);for(var d=0;d<c.length;d++){var e=f(c[d]),g=this._getDomNodeDataStorage(e,!0);if(g){var h=g.blocks;for(var i in h)h.hasOwnProperty(i)&&h[i].__self.destructOnDomNode(e);g.blocks={};var j=g.blockEvents;for(i in j)j.hasOwnProperty(i)&&j[i].offAll();g.blockEvents={}}}},getEmitter:function(a){a=this._getDomNodeFrom(a);var b=this._getDomNodeDataStorage(a),c=this.getBlockName(),d=b.blockEvents[c];return d||(a.addClass(this._delegateEventsCssClass),d=new k(this,a),b.blockEvents[c]=d),d},_getDomNodeFrom:function(a){if(!a)throw new Error("jQuery element, DOM Element or Block instance should be specified");return a instanceof j&&(a=a.getDomNode()),a=f(a)},_getDomNodeOptions:function(a){var b=a.attr("data-options");return b?JSON.parse(b):{}},_getDomNodeDataStorage:function(a,b){var c=a.data("block-storage");return c||b||(c={blocks:{},blockEvents:{}},a.data("block-storage",c)),c},_getPropagationEventName:function(a){return"block/"+this.getBlockName()+"/"+a},_autoInitCssClass:"_init",_delegateEventsCssClass:"_live-events"}),k=b(c,{__constructor:function(a,b){this._blockClass=a,this._domNode=b,this._listeners={}},_onAddEvent:function(a){function c(c,d){b.emit(a,d),d.isPropagationStopped()&&c.stopPropagation()}var b=this,d=this._blockClass._getPropagationEventName(a);this._domNode.on(d,c),this._listeners[a]=c},_onRemoveEvent:function(a){var b=this._blockClass._getPropagationEventName(a);this._domNode.off(b,this._listeners[a]),delete this._listeners[a]}});a(j)}),modules.define("inherit",function(a){function o(a){var b=e(a);if(k)for(var c,d=0;c=n[d++];)a.hasOwnProperty(c)&&b.push(c);return b}function p(a,c,d){for(var h,k,e=o(d),f=0,g=e.length;g>f;)h=e[f++],k=d[h],c[h]=i(k)&&(!b||k.toString().indexOf(".__base")>-1)?function(b,c){var d=a[b]||j;return function(){var a=this.__base;this.__base=d;var b=c.apply(this,arguments);return this.__base=a,b}}(h,k):k}var b=function(){"_"}.toString().indexOf("_")>-1,c=function(){},d=Object.create||function(a){var b=function(){};return b.prototype=a,new b},e=Object.keys||function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b},f=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},g=Object.prototype.toString,h=Array.isArray||function(a){return"[object Array]"===g.call(a)},i=function(a){return"[object Function]"===g.call(a)},j=function(){},k=!0,l={toString:""};for(var m in l)l.hasOwnProperty(m)&&(k=!1);var n=k?["toString","valueOf"]:null,q=function(){var a=arguments,b=h(a[0]),e=b||i(a[0]),g=e?b?a[0][0]:a[0]:c,j=a[e?1:0]||{},k=a[e?2:1],l=j.__constructor||e&&g.prototype.__constructor?function(){return this.__constructor.apply(this,arguments)}:function(){};if(!e)return l.prototype=j,l.prototype.__self=l.prototype.constructor=l,f(l,k);f(l,g);var m=g.prototype,n=l.prototype=d(m);if(n.__self=n.constructor=l,j&&p(m,n,j),k&&p(g,l,k),b)for(var s,t,u,v,w,q=1,r=a[0];s=r[q++];)for(i(s)&&(f(l,s),s=s.prototype),t=o(s),v=0,w=t.length;w>v;)u=t[v++],"__self"!==u&&"__constructor"!==u&&"constructor"!==u&&(n[u]=s[u]);return l};q.self=function(a,b,c){var d=a.prototype;return b&&p(d,d,b),c&&p(a,a,c),a},a(q)}),modules.define("event-emitter",["inherit"],function(a,b){var c=Array.prototype.slice,d=b({on:function(a,b,c){this._events||(this._events={});var d={callback:b,context:c},e=this._events[a];return e?e.push(d):(this._events[a]=[d],this._onAddEvent(a)),this},once:function(a,b,c){function e(){d.off(a,e,c),b.apply(c,arguments)}var d=this;return e._callback=b,this.on(a,e,c),this},off:function(a,b,c){if(!this._events)return this;var d=this._events[a];if(!d)return this;for(var e=d.length,f=0;e>f;f++){var g=d[f],h=g.callback;if((h===b||h._callback===b)&&g.context===c){1===e?(delete this._events[a],this._onRemoveEvent(a)):d.splice(f,1);break}}return this},offAll:function(a){if(this._events)if(a)this._events[a]&&(delete this._events[a],this._onRemoveEvent(a));else{for(a in this._events)this._events.hasOwnProperty(a)&&this._onRemoveEvent(a);delete this._events}return this},emit:function(a){if(!this._events)return this;var b=this._events[a];if(!b)return this;var f,d=b.slice(0),e=d.length,g=-1;switch(arguments.length){case 1:for(;++g<e;)f=d[g],f.callback.call(f.context);break;case 2:for(;++g<e;)f=d[g],f.callback.call(f.context,arguments[1]);break;case 3:for(;++g<e;)f=d[g],f.callback.call(f.context,arguments[1],arguments[2]);break;default:for(var h=c.call(arguments,1);++g<e;)f=d[g],f.callback.apply(f.context,h)}return this},_onAddEvent:function(){},_onRemoveEvent:function(){}});a(d)}),modules.define("event-manager",["inherit","event-emitter","jquery"],function(a,b,c,d){var e=b({__constructor:function(a){this._owner=a,this._listeners=[]},bindTo:function(a,b,e){if(a instanceof c)this._listeners.push({type:"islets",emitter:a.on(b,e,this._owner),event:b,callback:e});else{if(!(a instanceof d))throw new Error("Unsupported emitter type");var f=e.bind(this._owner);this._listeners.push({type:"jquery",emitter:a.on(b,f),event:b,callback:e,proxy:f})}return this},unbindFrom:function(a,b,c){for(var d=0;d<this._listeners.length;d++){var e=this._listeners[d];if(e.emitter===a&&e.event===b&&e.callback===c){this._unbind(e),this._listeners.splice(d,1);break}}return this},unbindAll:function(){for(;this._listeners.length;){var a=this._listeners.pop();this._unbind(a)}return this},_unbind:function(a){switch(a.type){case"islets":a.emitter.off(a.event,a.callback,this._owner);break;case"jquery":a.emitter.off(a.event,a.proxy)}}});a(e)}),modules.define("block-event",["inherit"],function(a,b){var c=b({__constructor:function(a,b,c){this.type=a,this._isPropagationStopped=Boolean(b),this._isDefaultPrevented=Boolean(c)},isPropagationStopped:function(){return this._isPropagationStopped},isDefaultPrevented:function(){return this._isDefaultPrevented},stopPropagation:function(){this._isPropagationStopped=!0},preventDefault:function(){this._isDefaultPrevented=!0}});a(c)}),function(a){var b=function(a){this._res=a,this._isFulfilled=!!arguments.length,this._isRejected=!1,this._fulfilledCallbacks=[],this._rejectedCallbacks=[],this._progressCallbacks=[]};b.prototype={valueOf:function(){return this._res},isFulfilled:function(){return this._isFulfilled},isRejected:function(){return this._isRejected},isResolved:function(){return this._isFulfilled||this._isRejected},fulfill:function(a){this.isResolved()||(this._isFulfilled=!0,this._res=a,this._callCallbacks(this._fulfilledCallbacks,a),this._fulfilledCallbacks=this._rejectedCallbacks=this._progressCallbacks=d)},reject:function(a){this.isResolved()||(this._isRejected=!0,this._res=a,this._callCallbacks(this._rejectedCallbacks,a),this._fulfilledCallbacks=this._rejectedCallbacks=this._progressCallbacks=d)},notify:function(a){this.isResolved()||this._callCallbacks(this._progressCallbacks,a)},then:function(a,c,e,f){c&&!g(c)?(f=c,c=d):e&&!g(e)&&(f=e,e=d);var i,h=new b;return this._isRejected||(i={promise:h,fn:g(a)?a:d,ctx:f},this._isFulfilled?this._callCallbacks([i],this._res):this._fulfilledCallbacks.push(i)),this._isFulfilled||(i={promise:h,fn:c,ctx:f},this._isRejected?this._callCallbacks([i],this._res):this._rejectedCallbacks.push(i)),this.isResolved()||this._progressCallbacks.push({promise:h,fn:e,ctx:f}),h},fail:function(a,b){return this.then(d,a,b)},always:function(a,b){var c=this,d=function(){return a.call(this,c)};return this.then(d,d,b)},progress:function(a,b){return this.then(d,d,a,b)},spread:function(a,b,c){return this.then(function(b){return a.apply(this,b)},b,c)},done:function(a,b,c,d){this.then(a,b,c,d).fail(f)},delay:function(a){return this.then(function(c){var d=new b;return setTimeout(function(){d.fulfill(c)},a),d})},timeout:function(a){var c=new b,d=setTimeout(function(){c.reject(Error("timed out"))},a);return c.sync(this),c.always(function(){clearTimeout(d)}),c},sync:function(a){a.then(this.fulfill,this.reject,this.notify,this)},_callCallbacks:function(a,b){var d=a.length;if(d){var f=this.isResolved(),g=this.isFulfilled();e(function(){for(var h,i,j,e=0;d>e;)if(h=a[e++],i=h.promise,j=h.fn){var l,k=h.ctx;try{l=k?j.call(k,b):j(b)}catch(m){i.reject(m);continue}f?c.isPromise(l)?function(a){l.then(function(b){a.fulfill(b)},function(b){a.reject(b)},function(b){a.notify(b)})}(i):i.fulfill(l):i.notify(l)}else f?g?i.fulfill(b):i.reject(b):i.notify(b)})}}};var d,c={promise:function(a){return arguments.length?c.isPromise(a)?a:new b(a):new b},when:function(a,b,d,e,f){return c.promise(a).then(b,d,e,f)},fail:function(a,b,e){return c.when(a,d,b,e)},always:function(a,b,d){return c.promise(a).always(b,d)},progress:function(a,b,d){return c.promise(a).progress(b,d)},spread:function(a,b,d,e){return c.promise(a).spread(b,d,e)},done:function(a,b,d,e,f){c.promise(a).done(b,d,e,f)},isPromise:function(a){return a&&g(a.then)},valueOf:function(a){return c.isPromise(a)?a.valueOf():a},isFulfilled:function(a){return c.isPromise(a)?a.isFulfilled():!0},isRejected:function(a){return c.isPromise(a)?a.isRejected():!1},isResolved:function(a){return c.isPromise(a)?a.isResolved():!0},fulfill:function(a){return c.when(a,d,function(a){return a})},reject:function(a){return c.when(a,function(a){var c=new b;return c.reject(a),c})},resolve:function(a){return c.isPromise(a)?a:c.when(a)},invoke:function(b){try{return c.promise(b.apply(a,h.call(arguments,1)))}catch(d){return c.reject(d)}},forEach:function(a,b,d,e){for(var f=e?e.length:a.length,g=0;f>g;)c.when(a[e?e[g]:g],b,d),++g},all:function(a){var d=new b,e=j(a),f=e?k(a):l(a),g=f.length,h=e?[]:{};if(!g)return d.fulfill(h),d;var i=g,m=function(){if(!--i){for(var b=0;g>b;)h[f[b]]=c.valueOf(a[f[b++]]);d.fulfill(h)}},n=function(a){d.reject(a)};return c.forEach(a,m,n,f),d},allResolved:function(a){var d=new b,e=j(a),f=e?k(a):l(a),g=f.length,h=e?[]:{};if(!g)return d.fulfill(h),d;var i=function(){--g||d.fulfill(a)};return c.forEach(a,i,i,f),d},allPatiently:function(a){return c.allResolved(a).then(function(){var e,f,i,m,b=j(a),d=b?k(a):l(a),g=d.length,h=0;if(!g)return b?[]:{};for(;g>h;)i=d[h++],m=a[i],c.isRejected(m)?(e||(e=b?[]:{}),b?e.push(m.valueOf()):e[i]=m.valueOf()):e||((f||(f=b?[]:{}))[i]=c.valueOf(m));if(e)throw e;return f})},any:function(a){var d=new b,e=a.length;if(!e)return d.reject(Error()),d;var g,f=0,h=function(a){d.fulfill(a)},i=function(a){f||(g=a),++f===e&&d.reject(g)};return c.forEach(a,h,i),d},delay:function(a,b){return c.promise(a).delay(b)},timeout:function(a,b){return c.promise(a).timeout(b)}},e=function(){var b=[],c=function(a){return 1===b.push(a)},d=function(){var a=b,c=0,d=b.length;for(b=[];d>c;)a[c++]()};if("object"==typeof process&&process.nextTick)return function(a){c(a)&&process.nextTick(d)};if(a.setImmediate)return function(b){c(b)&&a.setImmediate(d)};if(a.postMessage){var e=!0;if(a.attachEvent){var f=function(){e=!1};a.attachEvent("onmessage",f),a.postMessage("__checkAsync","*"),a.detachEvent("onmessage",f)}if(e){var g="__promise"+ +new Date,h=function(a){a.data===g&&(a.stopPropagation&&a.stopPropagation(),d())};return a.addEventListener?a.addEventListener("message",h,!0):a.attachEvent("onmessage",h),function(b){c(b)&&a.postMessage(g,"*")}}}var i=a.document;if("onreadystatechange"in i.createElement("script")){var j=function(){var a=i.createElement("script");a.onreadystatechange=function(){a.parentNode.removeChild(a),a=a.onreadystatechange=null,d()},(i.documentElement||i.body).appendChild(a)};return function(a){c(a)&&j()}}return function(a){c(a)&&setTimeout(d,0)}}(),f=function(a){e(function(){throw a})},g=function(a){return"function"==typeof a},h=Array.prototype.slice,i=Object.prototype.toString,j=Array.isArray||function(a){return"[object Array]"===i.call(a)},k=function(a){for(var b=[],c=0,d=a.length;d>c;)b.push(c++);return b},l=Object.keys||function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b},m=!0;"object"==typeof exports&&(module.exports=c,m=!1),"object"==typeof modules&&(modules.define("vow",function(a){a(c)}),m=!1),"function"==typeof define&&(define(function(a,b,d){d.exports=c}),m=!1),m&&(a.Vow=c)}(this),modules.define("extend",function(a){function d(a){return!("[object Object]"!==c.call(a)||a.nodeType||a.window===window)}var b=Object.prototype.hasOwnProperty,c=Object.prototype.toString;a(function e(){var c,f,a=arguments[0];for("boolean"==typeof a?(c=a,a=arguments[1],f=2):(c=!1,f=1);f<arguments.length;f++){var g=arguments[f];if(g)for(var h in g)if(b.call(g,h)){var i=g[h],j=!1;if(c&&i&&(d(i)||(j=Array.isArray(i)))){var l,k=a[h];l=j?k&&Array.isArray(k)?k:[]:k&&d(k)?k:{},a[h]=e(c,l,i)}else a[h]=i}}return a})}),modules.define("track",["jquery","block","inherit"],function(a,b,c,d){var e=d(c,{__constructor:function(){this.__base.apply(this,arguments)},getMediaElement:function(){return this._mediaElement||(this._mediaElement=this._createMediaElement()),this._mediaElement},_createMediaElement:function(){var a=this._getOptions().src,c=b("<audio>").attr("src",a);return c.get(0)}},{getBlockName:function(){return"track"}});a(e)}),modules.define("bt",["y-i18n"],function(a,b){var c=function(){function b(){this._lastMatchId=0,this._matchers={},this._defaultViews={},this._infiniteLoopDetection=!1,this.lib={},this._options={},this.utils={_side:"undefined"==typeof window?"s":"c",bt:this,getPosition:function(){var a=this.node;return"_content"===a.index?1:a.index+1},isFirst:function(){var a=this.node;return"_content"===a.index||0===a.index},isLast:function(){var a=this.node;return"_content"===a.index||a.index===a.arr.length-1},setTag:function(a){return this.ctx._tag=a,this},getTag:function(){return this.ctx._tag},setAttr:function(a,b){return(this.ctx._attrs||(this.ctx._attrs={}))[a]=b,this},getAttr:function(a){return this.ctx._attrs?this.ctx._attrs[a]:void 0},disableCssClassGeneration:function(){return this.ctx._disableCssGeneration=!0,this},enableCssClassGeneration:function(){return this.ctx._disableCssGeneration=!1,this},isCssClassGenerationEnabled:function(){return!Boolean(this.ctx._disableCssGeneration)},disableDataAttrGeneration:function(){return this.ctx._disableDataAttrGeneration=!0,this},enableDataAttrGeneration:function(){return this.ctx._disableDataAttrGeneration=!1,this},isDataAttrGenerationEnabled:function(){return!Boolean(this.ctx._disableDataAttrGeneration)},getState:function(a){return this.ctx._state?this.ctx._state[a]:void 0},setState:function(a,b){return(this.ctx._state||(this.ctx._state={}))[a]=1===arguments.length?!0:b,this},getParam:function(a){return this.ctx[a]},getView:function(){return this.ctx.view},getBlockName:function(){return this.ctx.block},getElementName:function(){return this.ctx.elem},setContent:function(a){return this.ctx._content=a,this},getContent:function(){return this.ctx._content},getMixins:function(){return this.ctx.mixins},addMixin:function(a){return(this.ctx.mixins||(this.ctx.mixins=[])).push(a),this},enableAutoInit:function(){return this.ctx.autoInit!==!1&&(this.ctx.autoInit=!0),this},isAutoInitEnabled:function(){return Boolean(this.ctx.autoInit)},setInitOption:function(a,b){return(this.ctx._initOptions||(this.ctx._initOptions={}))[a]=b,this},getInitOption:function(a){return this.ctx._initOptions?this.ctx._initOptions[a]:void 0},generateId:function(){return"uniq"+this._side+a++},stop:function(){return this.ctx._stop=!0,this},applyTemplates:function(){var a=this.ctx,b=this.node,c=this.bt.processBtJson(this.ctx,this.ctx.block,!0);return c!==a&&(this.newCtx=c),this.ctx=a,this.node=b,this},getJson:function(){return this.newCtx||this.ctx},escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")}}}var a=0;b.prototype={enableInfiniteLoopDetection:function(a){return this._infiniteLoopDetection=a,this},apply:function(a){return this.toHtml(this.processBtJson(a))},match:function(a,b){if(b.__id="__func"+this._lastMatchId++,Array.isArray(a))for(var c=0,d=a.length;d>c;c++)(this._matchers[a[c]]||(this._matchers[a[c]]=[])).unshift(b);else(this._matchers[a]||(this._matchers[a]=[])).unshift(b);return this},setDefaultView:function(a,b){return this._defaultViews[a]=b,this},processBtJson:function(a,b,c){function r(){this.ctx=null,this.newCtx=null
}var f,g,h,i,j,k,l,m,n,d=[a],e=[{json:a,arr:d,index:0,blockName:b}],o=this._matchers,p=!c,q=this._infiniteLoopDetection;r.prototype=this.utils;for(var s=new r;f=e.shift();){if(g=f.json,h=f.blockName,i=f.blockView,Array.isArray(g))for(j=0,k=g.length;k>j;j++)m=g[j],m!==!1&&null!=m&&"object"==typeof m&&e.push({json:m,arr:g,index:j,blockName:h,blockView:i});else{var t,u=!1;if(g.elem?g.block&&g.block!==h?(h=g.block,i=g.view=g.view||this._defaultViews[h]):(h=g.block=g.block||h,i=g.view=g.view||i||this._defaultViews[h]):g.block&&(h=g.block,i=g.view=g.view||this._defaultViews[h]),g.block){if(q&&(g.__processCounter=(g.__processCounter||0)+1,g.__processCounter>100))throw new Error('Infinite loop detected at "'+g.block+(g.elem?"__"+g.elem:"")+'".');if(n=null,!g._stop){s.node=f,s.ctx=g;var v=g.elem?"__"+g.elem:"",w=o[g.block+(g.view?"_"+g.view:"")+v];if(!w&&g.view&&(w=o[g.block+"_"+g.view.split("-")[0]+"*"+v]),w||(w=o[g.block+"*"+v]),w)for(j=0,k=w.length;k>j;j++){var x=w[j],y=x.__id;if(!g[y]){if(g[y]=!0,n=x(s),null!=n){g=n,f.json=g,f.blockName=h,f.blockView=i,e.push(f),u=!0;break}if(g._stop)break}}}}if(!u)if(Array.isArray(g))f.json=g,f.blockName=h,f.blockView=i,e.push(f);else if(p&&null!=(t=g._content))if(Array.isArray(t)){var z;do{for(z=!1,j=0,k=t.length;k>j;j++)if(Array.isArray(t[j])){z=!0;break}z&&(g._content=t=t.concat.apply([],t))}while(z);for(j=0,k=t.length,l=k-1;k>j;j++)m=t[j],m!==!1&&null!=m&&"object"==typeof m&&e.push({json:m,arr:t,index:j,blockName:h,blockView:i})}else e.push({json:t,arr:g,index:"_content",blockName:h,blockView:i})}f.arr[f.index]=g}return d[0]},toHtml:function(a){var b,e,f,g;if(a===!1||null==a)return"";if("object"!=typeof a)return a;if(Array.isArray(a)){for(b="",e=0,f=a.length;f>e;e++)g=a[e],g!==!1&&null!=g&&(b+=this.toHtml(g));return b}var h,j,i=a._disableDataAttrGeneration||a.elem||!a.block?"":' data-block="'+a.block+'"';if(h=a._attrs)for(e in h){var k=h[e];k===!0?i+=" "+e:null!=k&&(i+=" "+e+'="'+d(h[e])+'"')}a._initOptions&&((j={}).options=a._initOptions);var l=a.mixins;l&&l.length&&((j||(j={})).mixins=l),j&&(i+=' data-options="'+d(JSON.stringify(j))+'"');var m,n=a._tag||"div";if(b="<"+n,!a._disableCssGeneration){b+=' class="',b+=a.block+(a.view?"_"+a.view:"")+(a.elem?"__"+a.elem:"");var o=a._state;if(o)for(e in o){var p=o[e];null!=p&&""!==p&&p!==!1&&(b+=p===!0?" _"+e:" _"+e+"_"+p)}(a.autoInit||l&&l.length>0)&&(b+=" _init"),b+='"'}if(b+=i,c[n])b+="/>";else{if(b+=">",null!=(m=a._content))if(Array.isArray(m))for(e=0,f=m.length;f>e;e++)g=m[e],g!==!1&&null!=g&&(b+=this.toHtml(g));else b+=this.toHtml(m);b+="</"+n+">"}return b}};var c={area:1,base:1,br:1,col:1,command:1,embed:1,hr:1,img:1,input:1,keygen:1,link:1,meta:1,param:1,source:1,wbr:1},d=function(a){return a+="",~a.indexOf("&")&&(a=a.replace(/&/g,"&amp;")),~a.indexOf('"')&&(a=a.replace(/"/g,"&quot;")),a};return b}();"undefined"!=typeof module&&(module.exports=c);var d=new c;d.lib.i18n=b,d.match("page",function(a){var b,c=a.getParam("styles");return c&&(b=c.map(function(a){return{elem:"css",url:a.url,ie:a.ie}})),[a.getParam("doctype")||"<!DOCTYPE html>",{elem:"html",content:[{elem:"head",content:[[{elem:"meta",charset:"utf-8"},{elem:"title",content:a.getParam("title")},a.getParam("image")?{elem:"image",url:a.getParam("image")}:"",a.getParam("favicon")?{elem:"favicon",url:a.getParam("favicon")}:""],b,a.getParam("head")]},a.getJson()]}]}),d.match("page",function(a){a.setTag("body"),a.enableAutoInit();var b,c=a.getParam("scripts"),d=a.getParam("lang")||"ru";c&&(b=c.map(function(a){return{elem:"js",url:a.url?a.url.replace("{lang}",d):void 0,source:a.source}})),a.setContent([a.getParam("body"),b])}),d.match("page__title",function(a){a.disableCssClassGeneration(),a.setTag("title"),a.setContent(a.getParam("content"))}),d.match("page__html",function(a){a.setTag("html"),a.disableCssClassGeneration(),a.setContent(a.getParam("content"))}),d.match("page__head",function(a){a.setTag("head"),a.disableCssClassGeneration(),a.setContent(a.getParam("content"))}),d.match("page__meta",function(a){a.setTag("meta"),a.disableCssClassGeneration(),a.setAttr("content",a.getParam("content")),a.setAttr("http-equiv",a.getParam("http-equiv")),a.setAttr("charset",a.getParam("charset"))}),d.match("page__favicon",function(a){a.disableCssClassGeneration(),a.setTag("link"),a.setAttr("rel","shortcut icon"),a.setAttr("href",a.getParam("url"))}),d.match("page__image",function(a){a.disableCssClassGeneration(),a.setTag("link"),a.setAttr("rel","image_src"),a.setAttr("href",a.getParam("url"))}),d.match("page__js",function(a){a.disableCssClassGeneration(),a.setTag("script");var b=a.getParam("url");b&&a.setAttr("src",b);var c=a.getParam("source");c&&a.setContent(c),a.setAttr("type","text/javascript")}),d.match("page__css",function(a){a.disableCssClassGeneration();var b=a.getParam("url");b?(a.setTag("link"),a.setAttr("rel","stylesheet"),a.setAttr("href",b)):a.setTag("style");var c=a.getParam("ie");return void 0!==c?c===!0?["<!--[if IE]>",a.getJson(),"<![endif]-->"]:c===!1?["<!--[if !IE]> -->",a.getJson(),"<!-- <![endif]-->"]:["<!--[if "+c+"]>",a.getJson(),"<![endif]-->"]:void 0}),d.match("player*",function(a){a.enableAutoInit(),a.setContent([{block:"turntable"},{elem:"play-button"},{elem:"list",tracks:a.getParam("tracks")}])}),d.match("player*__list",function(a){var b=a.getParam("tracks").map(function(a){return{block:"track",name:a.name,src:a.src}});a.setContent(b)}),d.match("turntable*",function(a){a.enableAutoInit()}),d.match("track*",function(a){a.enableAutoInit(),a.setContent([{elem:"text",content:a.getParam("name")},{elem:"audio",src:a.getParam("src")}])}),d.match("track*__text",function(a){a.setContent(a.getParam("content"))}),d.match("track*__audio",function(a){a.setInitOption("src",a.getParam("src"))}),d.match("poster*",function(a){a.setContent({elem:"image"})}),d.match("poster*__image",function(){}),a(d)}),function(){function a(a){return a&&"function"==typeof a||(a=function(){function a(){var a=function(b,c,d){var e=a._keysets[b];if(!e)throw new Error('Keyset "'+b+'" was not found.');var f=e[c];if(void 0===f)throw new Error('Key "'+c+'" in keyset "'+b+'" was not found.');return"function"==typeof f?f(d||{}):f};return a._keysets={},a._language="ru",a.add=function(b,c){return a._keysets[b]=c,a},a.setLanguage=function(a){return this._language=a,this},a.getLanguage=function(){return this._language},a.utils={plural:function(a){var b=a.count,c=a.one,d=a.some,e=a.many;void 0===e?e=d:void 0===d&&(d=e);var f=b%10,g=b%100;return 1===f&&11!==g?c:f>1&&5>f&&(10>g||g>20)?d:e},include:function(b){var c={};for(var d in b)b.hasOwnProperty(d)&&"key"!==d&&"keyset"!==d&&(c[d]=b[d]);return a(b.keyset,b.key,c)}},a}return a()}()),a.setLanguage("ru"),a}"undefined"!=typeof modules?modules.define("y-i18n",function(b,c){b(a(c))}):"undefined"!=typeof module?module.exports=function(){return a()}:"undefined"!=typeof window?window.i18n=a():i18n=a()}(),function(){var a=window.Modernizr;try{delete window.Modernizr}catch(b){}modules.define("modernizr",function(b){b(a)})}();